<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Styles.Resources>

        <ResourceDictionary>

			<SolidColorBrush x:Key="CaptionButtonForeground" Color="Black" />
			<SolidColorBrush x:Key="CaptionButtonBackground" Color="Gray" />
			<SolidColorBrush x:Key="CaptionButtonBorderBrush" Color="#C0C0C0" />
						
			<ResourceDictionary.MergedDictionaries>
				
				<ResourceDictionary>
					<ControlTheme x:Key="{x:Type TitleBar}" TargetType="TitleBar">
						<Setter Property="Foreground" Value="{DynamicResource SystemControlForegroundBaseHighBrush}" />
						<Setter Property="VerticalAlignment" Value="Top" />
						<Setter Property="HorizontalAlignment" Value="Stretch" />
						<Setter Property="Background" Value="Transparent" />
						<Setter Property="Template">
							<ControlTemplate>
								<Panel HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
									   VerticalAlignment="Stretch">
									<Panel x:Name="PART_MouseTracker"
										   Height="1"
										   VerticalAlignment="Top" />
									<Panel x:Name="PART_Container">
										<Border x:Name="PART_Background"
												Background="{TemplateBinding Background}"
												IsHitTestVisible="False"
												Win32Properties.NonClientHitTestResult="Caption" />
										<CaptionButtons x:Name="PART_CaptionButtons"
														VerticalAlignment="Top"
														HorizontalAlignment="Right"
														Foreground="{TemplateBinding Foreground}"
														Win32Properties.NonClientHitTestResult="Client" />
									</Panel>
								</Panel>
							</ControlTemplate>
						</Setter>

						<Style Selector="^:fullscreen">
							<Setter Property="Background" Value="Transparent" />
							<!--
							<Setter Property="Background" Value="{DynamicResource SystemAccentColor}" />
							-->
						</Style>

						<Style Selector="^:fullscreen /template/ Border#PART_Background">
							<Setter Property="IsHitTestVisible" Value="True" />
						</Style>

						<Style Selector="^:fullscreen /template/ Panel#PART_MouseTracker">
							<Setter Property="Background" Value="Transparent" />
						</Style>

						<Style Selector="^:fullscreen /template/ Panel#PART_Container">
							<Setter Property="RenderTransform" Value="translateY(-36px)" />
							<!-- 
							<Setter Property="RenderTransform" Value="translateY(-30px)" />
							-->
							<Setter Property="Transitions">
								<Transitions>
									<TransformOperationsTransition Property="RenderTransform" Duration="0:0:.25" />
								</Transitions>
							</Setter>
						</Style>

						<Style Selector="^:fullscreen:pointerover /template/ Panel#PART_Container">
							<Setter Property="RenderTransform" Value="none" />
						</Style>
					</ControlTheme>
				</ResourceDictionary>

				<ResourceDictionary>

					<x:Double x:Key="CaptionButtonWidth">45</x:Double>
					<x:Double x:Key="CaptionButtonHeight">30</x:Double>

					<Design.PreviewWith>
						<Border Padding="20">
							<StackPanel Spacing="20">
								<ThemeVariantScope RequestedThemeVariant="Dark">
									<Border Background="Black">
										<CaptionButtons Height="30"/>
									</Border>
								</ThemeVariantScope>
								<ThemeVariantScope RequestedThemeVariant="Light">
									<CaptionButtons Height="30"/>
								</ThemeVariantScope>
							</StackPanel>
						</Border>
					</Design.PreviewWith>

					<ControlTheme x:Key="FluentCaptionButton" TargetType="Button">
						<Setter Property="Background" Value="{DynamicResource CaptionButtonBackground}" />
						<!-- Reusing BorderBrush to define pressed background color, as it's not used otherwise -->
						<Setter Property="BorderBrush" Value="{DynamicResource CaptionButtonBorderBrush}" />
						<Setter Property="Foreground" Value="{DynamicResource CaptionButtonForeground}"/>
						<Setter Property="Width" Value="{DynamicResource CaptionButtonWidth}"/>
						<Setter Property="Height" Value="{DynamicResource CaptionButtonHeight}"/>
						<Setter Property="VerticalAlignment" Value="Stretch"/>
						<!-- Focusable=False added -->
						<Setter Property="Focusable" Value="False"/>
						
						<Setter Property="Template">
							<ControlTemplate>
								<ContentPresenter Name="PART_ContentPresenter"
												  Background="Transparent"
												  Content="{TemplateBinding Content}"/>
							</ControlTemplate>
						</Setter>

						<Style Selector="^:pointerover /template/ ContentPresenter">
							<Setter Property="Background" Value="{TemplateBinding Background}" />
						</Style>

						<Style Selector="^:pressed /template/ ContentPresenter">
							<Setter Property="Background" Value="{TemplateBinding BorderBrush}" />
						</Style>
					</ControlTheme>

					<ControlTheme x:Key="{x:Type CaptionButtons}" TargetType="CaptionButtons">
						<Setter Property="MaxHeight" Value="30" />
						<Setter Property="Template">
							<ControlTemplate>
								<StackPanel Spacing="2" VerticalAlignment="Stretch" TextElement.FontSize="10" Orientation="Horizontal">
									<Button x:Name="PART_FullScreenButton"
											Theme="{StaticResource FluentCaptionButton}"
											IsVisible="False">
										<Viewbox Width="11" Margin="2">
											<Path Name="FullScreenButtonPath"
												  Stretch="UniformToFill"
												  Fill="{TemplateBinding Foreground}"
												  Data="M2048 2048v-819h-205v469l-1493 -1493h469v-205h-819v819h205v-469l1493 1493h-469v205h819z" />
										</Viewbox>
									</Button>
									<Button x:Name="PART_MinimizeButton"
											Theme="{StaticResource FluentCaptionButton}"
											AutomationProperties.Name="Minimize"
											Win32Properties.NonClientHitTestResult="MinButton">
										<Viewbox Width="11" Margin="2">
											<Path Stretch="UniformToFill"
												  Fill="{TemplateBinding Foreground}"
												  Data="M2048 1229v-205h-2048v205h2048z" />
										</Viewbox>
									</Button>
									<Button x:Name="PART_RestoreButton"
											Theme="{StaticResource FluentCaptionButton}"
											AutomationProperties.Name="Maximize"
											Win32Properties.NonClientHitTestResult="MaxButton">
										<Viewbox Width="11" Margin="2">
											<Viewbox.RenderTransform>
												<RotateTransform Angle="-90" />
											</Viewbox.RenderTransform>
											<Path Name="RestoreButtonPath"
												  Stretch="UniformToFill"
												  Fill="{TemplateBinding Foreground}"
												  Data="M2048 2048v-2048h-2048v2048h2048zM1843 1843h-1638v-1638h1638v1638z"/>
										</Viewbox>
									</Button>
									<Button x:Name="PART_CloseButton"
											Background="#ffe81123"
											BorderBrush="#fff1707a"
											Theme="{StaticResource FluentCaptionButton}"
											AutomationProperties.Name="Close"
											Win32Properties.NonClientHitTestResult="Close">
										<Viewbox Width="11" Margin="2">
											<Path Stretch="UniformToFill"
												  Fill="{TemplateBinding Foreground}"
												  Data="M1169 1024l879 -879l-145 -145l-879 879l-879 -879l-145 145l879 879l-879 879l145 145l879 -879l879 879l145 -145z" />
										</Viewbox>
									</Button>
								</StackPanel>
							</ControlTemplate>
						</Setter>
						<Style Selector="^:maximized /template/ Path#RestoreButtonPath">
							<Setter Property="Data" Value="M2048 410h-410v-410h-1638v1638h410v410h1638v-1638zM1434 1434h-1229v-1229h1229v1229zM1843 1843h-1229v-205h1024v-1024h205v1229z" />
						</Style>
						<Style Selector="^:fullscreen /template/ Path#FullScreenButtonPath">
							<Setter Property="IsVisible" Value="True" />
							<Setter Property="Data" Value="M205 1024h819v-819h-205v469l-674 -674l-145 145l674 674h-469v205zM1374 1229h469v-205h-819v819h205v-469l674 674l145 -145z" />
						</Style>
						<Style Selector="^:fullscreen /template/ Button#PART_RestoreButton">
							<Setter Property="IsVisible" Value="False" />
						</Style>
						<Style Selector="^:fullscreen /template/ Button#PART_MinimizeButton">
							<Setter Property="IsVisible" Value="False" />
						</Style>
						<Style Selector="^ /template/ Button:disabled">
							<Setter Property="Opacity" Value="0.2"/>
						</Style>
					</ControlTheme>
				</ResourceDictionary>
				
			</ResourceDictionary.MergedDictionaries>

		</ResourceDictionary>

	</Styles.Resources>
</Styles>
