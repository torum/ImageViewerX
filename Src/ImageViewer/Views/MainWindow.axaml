<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ImageViewer.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:ImageViewer.Views"
        xmlns:helper="clr-namespace:ImageViewer.Helpers"
        xmlns:mod="clr-namespace:ImageViewer.Models"
		xmlns:ia="using:Xaml.Behaviors.Interactions.Animated"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="ImageViewer.Views.MainWindow"
		x:DataType="vm:MainViewModel"
        x:CompileBindings="True"
        Title="ImageViewerX"
		Background="Transparent"
		Focusable="True"
		ExtendClientAreaToDecorationsHint="True"
		ExtendClientAreaChromeHints="PreferSystemChrome"
	    TransparencyBackgroundFallback="#131313"
		TransparencyLevelHint="None"
		WindowStartupLocation="Manual"
		DragDrop.AllowDrop="True"
        DragDrop.Drop="Window_Drop"
        DragDrop.DragOver="Window_DragOver"
		DoubleTapped="Window_DoubleTapped"
		PointerWheelChanged="Window_PointerWheelChanged"
		PointerPressed="Window_PointerPressed"
		Loaded="Window_Loaded"
		Closing="Window_Closing"
		KeyDown="Window_KeyDown"
		KeyUp="Window_KeyUp"
		Resized="Window_Resized"
		PointerMoved="Window_PointerMoved"
		Activated="Window_Activated"
		Deactivated="Window_Deactivated">
	<!--
	    TransparencyBackgroundFallback="Transparent"
		TransparencyLevelHint="Transparent"
		ExtendClientAreaToDecorationsHint="True"
		ExtendClientAreaChromeHints="PreferSystemChrome"
        ExtendClientAreaTitleBarHeightHint="32"
		SystemDecorations="BorderOnly"
        BorderBrush="Transparent"
        BorderThickness="0"
	-->
	<!-- 
		TransparencyLevelHint="AcrylicBlur" 
		TransparencyLevelHint="Mica" -->
	<Window.Resources>

	</Window.Resources>
	<Window.Styles>
		<!-- A separate style that targets CaptionButtons when the Window is active -->
		<Style Selector="Window:isActive CaptionButtons">
			<Setter Property="Opacity" Value="1.0" />
		</Style>
	</Window.Styles>
	<Interaction.Behaviors>
		<DataTriggerBehavior Binding="{Binding IsWorking}" ComparisonCondition="Equal" Value="True">
			<ChangePropertyAction PropertyName="Cursor" Value="AppStarting" />
		</DataTriggerBehavior>
		<DataTriggerBehavior Binding="{Binding IsWorking}" ComparisonCondition="Equal" Value="False">
			<ChangePropertyAction PropertyName="Cursor" Value="Arrow" />
		</DataTriggerBehavior>
	</Interaction.Behaviors>
	
	<FlyoutBase.AttachedFlyout>
		<MenuFlyout Placement="Pointer">
			<MenuFlyout.FlyoutPresenterTheme>
				<ControlTheme TargetType="MenuFlyoutPresenter" BasedOn="{StaticResource {x:Type MenuFlyoutPresenter}}">
					<Setter Property="Background" Value="{DynamicResource MenuFlyoutPresenterBackground}" />
					<Setter Property="BorderBrush" Value="{DynamicResource MenuFlyoutPresenterBorderBrush}" />
					<Setter Property="BorderThickness" Value="{DynamicResource MenuFlyoutPresenterBorderThemeThickness}" />
					<Setter Property="Padding" Value="{DynamicResource MenuFlyoutPresenterThemePadding}" />
					<Setter Property="MaxWidth" Value="{DynamicResource FlyoutThemeMaxWidth}" />
					<Setter Property="MinHeight" Value="{DynamicResource MenuFlyoutThemeMinHeight}" />
					<Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
					<Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
					<Setter Property="CornerRadius" Value="{DynamicResource OverlayCornerRadius}" />
					<Setter Property="Width" Value="356" />
					<Setter Property="Opacity" Value="0.95" />
					<Setter Property="Template">
						<ControlTemplate>
							<Border Name="LayoutRoot"
									Background="{TemplateBinding Background}"
									BorderBrush="{TemplateBinding BorderBrush}"
									BorderThickness="{TemplateBinding BorderThickness}"
									Padding="{DynamicResource FlyoutBorderThemePadding}"
									CornerRadius="{TemplateBinding CornerRadius}">
								<ScrollViewer HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
											  Theme="{StaticResource FluentMenuScrollViewer}"
											  VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}">

									<Grid>
										<Grid.RowDefinitions>
											<RowDefinition Height="52"></RowDefinition>
											<RowDefinition Height="Auto"></RowDefinition>
											<RowDefinition Height="*"></RowDefinition>
										</Grid.RowDefinitions>

										<StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="4">
											<Button Command="{Binding ToggleSlideshowCommand}" Width="66" Height="48" BorderThickness="0" Margin="4,4,0,0" FontSize="12" Padding="0" Background="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
												<Button.Styles>
													<Style Selector=":disabled /template/ ContentPresenter">
														<Setter Property="Opacity" Value="0.5"/>
														<Setter Property="TextBlock.Foreground" Value="Gray"/>
														<Setter Property="Background" Value="Transparent"/>
													</Style>
												</Button.Styles>	
												<StackPanel>
													<Viewbox Width="14" Height="14" Margin="0,4,0,8">
														<PathIcon Foreground="{Binding $parent[Button].Foreground}" Data="{Binding DataPlayPauseIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0"></PathIcon>
													</Viewbox>
													<TextBlock Text="Start"></TextBlock>
												</StackPanel>
											</Button>
											<Button Command="{Binding ToggleShuffleCommand}" Width="66" Height="48" BorderThickness="0" Margin="0,4,0,0" FontSize="12" Padding="0" Background="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
												<StackPanel>
													<Viewbox Width="14" Height="14" Margin="0,4,0,8">
														<PathIcon Foreground="{Binding $parent[Button].Foreground}" Data="{Binding DataShuffleIcon, Mode=OneWay}" Width="NaN" Height="NaN" Margin="0" Padding="0"></PathIcon>
													</Viewbox>
													<TextBlock Text="Shuffle"></TextBlock>
												</StackPanel>
											</Button>
											<Button Command="{Binding ToggleRepeatCommand}" Width="66" Height="48" BorderThickness="0" Margin="0,4,0,0" FontSize="12" Padding="0" Background="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
												<StackPanel>
													<Viewbox Width="14" Height="14" Margin="0,4,0,8">
														<PathIcon Foreground="{Binding $parent[Button].Foreground}" Data="{Binding DataRepeatIcon, Mode=OneWay}" Width="NaN" Height="NaN" Margin="0" Padding="0"></PathIcon>
													</Viewbox>
													<TextBlock Text="Repeat"></TextBlock>
												</StackPanel>
											</Button>
											<Button Command="{Binding ToggleFullscreenCommand}" Width="66" Height="48" BorderThickness="0" Margin="0,4,0,0" FontSize="12" Padding="0" Background="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
												<StackPanel>
													<Viewbox Width="14" Height="14" Margin="0,4,0,8">
														<PathIcon Foreground="{Binding $parent[Button].Foreground}" Data="{Binding DataFullscreenOnIcon, Mode=OneWay}" Width="NaN" Height="NaN" Margin="0" Padding="0"></PathIcon>
													</Viewbox>
													<TextBlock Text="Fullscreen"></TextBlock>
												</StackPanel>
											</Button>
											<Button Command="{Binding ToggleStayOnTopCommand}" Width="66" Height="48" BorderThickness="0" Margin="0,4,4,0" FontSize="12" Padding="0" Background="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
												<StackPanel>
													<Viewbox Width="14" Height="14" Margin="0,4,0,8">
														<PathIcon Data="{Binding DataStayOnTopIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0"></PathIcon>
													</Viewbox>
													<TextBlock Text="Pin Top"></TextBlock>
												</StackPanel>
											</Button>
										</StackPanel>

										<Separator Grid.Row="1" Margin="0,6,0,6" Padding="0" Opacity="0.4"/>
										
										<ItemsPresenter Name="PART_ItemsPresenter"
														Grid.Row="2"
														ItemsPanel="{TemplateBinding ItemsPanel}"
														Margin="{DynamicResource MenuFlyoutScrollerMargin}"
														KeyboardNavigation.TabNavigation="Continue"
														Grid.IsSharedSizeScope="True" />
									</Grid>
									
									
								</ScrollViewer>
							</Border>
						</ControlTemplate>
					</Setter>
				</ControlTheme>
			</MenuFlyout.FlyoutPresenterTheme>
			
			<!--
			<MenuItem Header="StayOnTop" Command="{Binding ToggleStayOnTopCommand}">
				<MenuItem.Icon>
					<PathIcon Data="{Binding DataStayOnTopIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0"/>
				</MenuItem.Icon>
			</MenuItem>
			-->
			<MenuItem Header="Open">
				<MenuItem.Icon>
					<PathIcon Data="M2 4.5V9.10022L2.92389 7.5C3.45979 6.5718 4.45017 6 5.52196 6L11.9146 6C11.7087 5.4174 11.1531 5 10.5 5H7C6.86739 5 6.74021 4.94732 6.64645 4.85355L4.93934 3.14645C4.84557 3.05268 4.71839 3 4.58579 3H3.5C2.67157 3 2 3.67157 2 4.5ZM7.06895 13.9953C7.04641 13.9984 7.02339 14 7 14H3.5C2.11929 14 1 12.8807 1 11.5V4.5C1 3.11929 2.11929 2 3.5 2H4.58579C4.98361 2 5.36514 2.15804 5.64645 2.43934L7.20711 4H10.5C11.724 4 12.7426 4.87965 12.958 6.04127C14.605 6.34148 15.5443 8.22106 14.6616 9.75L13.0766 12.4953C12.5407 13.4235 11.5503 13.9953 10.4785 13.9953H7.06895ZM5.52196 7C4.80743 7 4.14718 7.3812 3.78991 8L2.20492 10.7453C1.62757 11.7453 2.34926 12.9953 3.50396 12.9953L10.4785 12.9953C11.193 12.9953 11.8533 12.6141 12.2105 11.9953L13.7955 9.25C14.3729 8.25 13.6512 7 12.4965 7L5.52196 7Z" Width="NaN" Height="NaN" Margin="0" Padding="0">
					</PathIcon>
				</MenuItem.Icon>
				<MenuItem Header="Select Files" Click="Button_FilePick_Click">
					<MenuItem.Icon>
						<PathIcon Data="M10 5C10 5.55228 9.55228 6 9 6C8.44772 6 8 5.55228 8 5C8 4.44772 8.44772 4 9 4C9.55228 4 10 4.44772 10 5ZM4.5 2C3.11929 2 2 3.11929 2 4.5V9.5C2 10.8807 3.11929 12 4.5 12H9.5C10.8807 12 12 10.8807 12 9.5V4.5C12 3.11929 10.8807 2 9.5 2H4.5ZM3 4.5C3 3.67157 3.67157 3 4.5 3H9.5C10.3284 3 11 3.67157 11 4.5V9.5C11 9.73157 10.9475 9.95088 10.8538 10.1467L8.20919 7.50207C7.54139 6.83427 6.45868 6.83427 5.79089 7.50207L3.1462 10.1467C3.05248 9.95092 3 9.73159 3 9.5V4.5ZM3.85333 10.8538L6.49799 8.20917C6.77526 7.9319 7.22481 7.9319 7.50208 8.20918L10.1467 10.8538C9.9509 10.9475 9.73158 11 9.5 11H4.5C4.26844 11 4.04914 10.9475 3.85333 10.8538ZM6.99994 14C6.18203 14 5.45586 13.6072 4.99976 13H9.49994C11.4329 13 12.9999 11.433 12.9999 9.5V3.99982C13.6072 4.45592 13.9999 5.18209 13.9999 6V9.5C13.9999 11.9853 11.9852 14 9.49994 14H6.99994Z" Width="NaN" Height="NaN" Margin="0" Padding="0">
						</PathIcon>
					</MenuItem.Icon>
				</MenuItem>
				<MenuItem Header="Select Folders" Click="Button_FolderPick_Click">
					<MenuItem.Icon>
						<PathIcon Data="M4 5C4 4.44772 4.44772 4 5 4H6.5C7.05228 4 7.5 4.44772 7.5 5V6.5C7.5 7.05228 7.05228 7.5 6.5 7.5H5C4.44772 7.5 4 7.05228 4 6.5V5ZM6.5 5H5V6.5H6.5V5ZM5 8.5C4.44772 8.5 4 8.94772 4 9.5V11C4 11.5523 4.44772 12 5 12H6.5C7.05228 12 7.5 11.5523 7.5 11V9.5C7.5 8.94772 7.05228 8.5 6.5 8.5H5ZM5 9.5H6.5V11H5V9.5ZM8.5 5C8.5 4.44772 8.94772 4 9.5 4H11C11.5523 4 12 4.44772 12 5V6.5C12 7.05228 11.5523 7.5 11 7.5H9.5C8.94772 7.5 8.5 7.05228 8.5 6.5V5ZM11 5H9.5V6.5H11V5ZM9.5 8.5C8.94772 8.5 8.5 8.94772 8.5 9.5V11C8.5 11.5523 8.94772 12 9.5 12H11C11.5523 12 12 11.5523 12 11V9.5C12 8.94772 11.5523 8.5 11 8.5H9.5ZM9.5 9.5H11V11H9.5V9.5ZM2 4.5C2 3.11929 3.11929 2 4.5 2H11.5C12.8807 2 14 3.11929 14 4.5V11.5C14 12.8807 12.8807 14 11.5 14H4.5C3.11929 14 2 12.8807 2 11.5V4.5ZM4.5 3C3.67157 3 3 3.67157 3 4.5V11.5C3 12.3284 3.67157 13 4.5 13H11.5C12.3284 13 13 12.3284 13 11.5V4.5C13 3.67157 12.3284 3 11.5 3H4.5Z" Width="NaN" Height="NaN" Margin="0" Padding="0">
						</PathIcon>
					</MenuItem.Icon>
				</MenuItem>
			</MenuItem>
			<MenuItem x:Name="MenuItemStartSlideshow" Header="StartSlideshow" Command="{Binding ToggleSlideshowCommand}" IsVisible="False">
				<MenuItem.Icon>
					<PathIcon Data="{Binding DataPlayPauseIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0">
					</PathIcon>
				</MenuItem.Icon>
			</MenuItem>

			<MenuItem Header="Effects">
				<MenuItem.Icon>
					<PathIcon Data="M3.29289 3H4.70711L1 6.70711V5.29289L3.29289 3ZM1 8.79289V10.2071L5.15175 6.05536C5.4491 5.15835 6.15835 4.4491 7.05536 4.15175L8.20711 3H6.79289L1 8.79289ZM5.2038 8.08909L1.0861 12.2068C1.21293 12.5297 1.47028 12.7871 1.7932 12.9139L4.02515 10.682C4.16094 9.83212 4.83212 9.16094 5.68196 9.02515L5.73726 8.96984C5.51207 8.71139 5.33044 8.41399 5.2038 8.08909ZM11.7231 9.98402C11.551 9.6928 11.3072 9.44899 11.016 9.27691L15 5.29289V6.70711L11.7231 9.98402ZM12 13H12.2071L15 10.2071V8.79289L12 11.7929V13ZM9.96984 4.73726C9.71139 4.51207 9.41399 4.33044 9.08909 4.2038L10.2929 3H11.7071L9.96984 4.73726ZM10.9924 7.21467C10.9975 7.14376 11 7.07218 11 7C11 6.63933 10.9364 6.29353 10.8197 5.97321L13.7922 3.0007C14.1729 3.01333 14.5106 3.19624 14.7314 3.47572L10.9924 7.21467ZM8 6C7.44772 6 7 6.44772 7 7C7 7.55228 7.44772 8 8 8C8.55228 8 9 7.55228 9 7C9 6.44772 8.55228 6 8 6ZM6 7C6 5.89543 6.89543 5 8 5C9.10457 5 10 5.89543 10 7C10 8.10457 9.10457 9 8 9C6.89543 9 6 8.10457 6 7ZM6 10C5.44772 10 5 10.4477 5 11V13H6V11H10V13H11V11C11 10.4477 10.5523 10 10 10H6Z" Width="NaN" Height="NaN" Margin="0" Padding="0">
					</PathIcon>
				</MenuItem.Icon>
				<MenuItem Header="Fade In &amp; Out" Command="{Binding ToggleFadeInAndOutCommand}">
					<MenuItem.Icon>
						<PathIcon Data="{Binding DataFadeInFadeOutIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0">
						</PathIcon>
					</MenuItem.Icon>
				</MenuItem>
				<MenuItem Header="Slide Kick In &amp; Out" Command="{Binding TogglePageSlideCommand}">
					<MenuItem.Icon>
						<PathIcon Data="{Binding DataPageSlideIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0">
						</PathIcon>
					</MenuItem.Icon>
				</MenuItem>
				<MenuItem Header="No Effect" Command="{Binding ToggleNoEffectsCommand}">
					<MenuItem.Icon>
						<PathIcon Data="{Binding DataNoEffectsIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0">
						</PathIcon>
					</MenuItem.Icon>
				</MenuItem>
				<Separator/>
				<MenuItem Header="Crossfade" Command="{Binding ToggleCrossfadeCommand}">
					<MenuItem.Icon>
						<PathIcon Data="{Binding DataCrossfadeIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0">
						</PathIcon>
					</MenuItem.Icon>
				</MenuItem>
			</MenuItem>
			<!--
			<MenuItem Header="Slideshow">
				<MenuItem Header="Repeat" Command="{Binding ToggleRepeatCommand}">
					<MenuItem.Icon>
						<PathIcon Data="{Binding DataRepeatIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0">
						</PathIcon>
					</MenuItem.Icon>
				</MenuItem>	
			</MenuItem>
			-->
			<!--
			<MenuItem Header="Shuffle" Command="{Binding ToggleShuffleCommand}">
				<MenuItem.Icon>
					<PathIcon Data="{Binding DataShuffleIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0">
					</PathIcon>
				</MenuItem.Icon>
			</MenuItem>
			-->
			<MenuItem Header="SystemDPIScalingFactor" Command="{Binding ToggleSystemDPIScalingFactorCommand}">
				<MenuItem.Icon>
					<PathIcon Data="{Binding DataSystemDPIScalingFactorOnIcon}" Width="NaN" Height="NaN" Margin="0" Padding="0">
					</PathIcon>
				</MenuItem.Icon>
			</MenuItem>
			<MenuItem Header="Show in File Manager" Command="{Binding ShowInExplorerCommand}">
				<MenuItem.Icon>
					<PathIcon Data="M4.49999 3C3.67157 3 3 3.67157 3 4.5V11.5C3 12.3284 3.67157 13 4.49999 13H11.5C12.3284 13 12.9999 12.3284 12.9999 11.5V9.26923C12.9999 8.99309 13.2238 8.76923 13.4999 8.76923C13.7761 8.76923 13.9999 8.99309 13.9999 9.26923V11.5C13.9999 12.8807 12.8807 14 11.5 14H4.49999C3.11928 14 2 12.8807 2 11.5V4.5C2 3.11929 3.11928 2 4.49999 2H6.73075C7.00689 2 7.23074 2.22386 7.23074 2.5C7.23074 2.77614 7.00689 3 6.73075 3H4.49999ZM8.76926 2.5C8.76926 2.22386 8.99311 2 9.26925 2H13.5C13.7761 2 14 2.22386 14 2.5V6.73077C14 7.00691 13.7761 7.23077 13.5 7.23077C13.2239 7.23077 13 7.00691 13 6.73077V3.70711L9.6228 7.08433C9.42754 7.27959 9.11096 7.27959 8.9157 7.08433C8.72044 6.88906 8.72044 6.57248 8.9157 6.37722L12.2929 3H9.26925C8.99311 3 8.76926 2.77614 8.76926 2.5Z" Width="NaN" Height="NaN" Margin="0" Padding="0">
					</PathIcon>
				</MenuItem.Icon>
			</MenuItem>
			<Separator/>
			<MenuItem x:Name="MenuItemQuit" Header="Quit" Command="{Binding QuitCommand}">
				<MenuItem.Icon>
					<PathIcon Data="M4.5 2C3.11929 2 2 3.11929 2 4.5V11.5C2 12.8807 3.11929 14 4.5 14H10.5C10.7761 14 11 13.7761 11 13.5C11 13.2239 10.7761 13 10.5 13H4.5C3.67157 13 3 12.3284 3 11.5V4.5C3 3.67157 3.67157 3 4.5 3H10.5C10.7761 3 11 2.77614 11 2.5C11 2.22386 10.7761 2 10.5 2H4.5ZM11.8536 4.64645C11.6583 4.45118 11.3417 4.45118 11.1464 4.64645C10.9512 4.84171 10.9512 5.15829 11.1464 5.35355L13.2929 7.5H6.5C6.22386 7.5 6 7.72386 6 8C6 8.27614 6.22386 8.5 6.5 8.5H13.2929L11.1464 10.6464C10.9512 10.8417 10.9512 11.1583 11.1464 11.3536C11.3417 11.5488 11.6583 11.5488 11.8536 11.3536L14.8536 8.35355C15.0488 8.15829 15.0488 7.84171 14.8536 7.64645L11.8536 4.64645Z" Width="NaN" Height="NaN" Margin="0" Padding="0">
					</PathIcon>
				</MenuItem.Icon>
			</MenuItem>
		</MenuFlyout>
	</FlyoutBase.AttachedFlyout>

	<Grid>
		<Border x:Name="BackgroundLayerBorder" Background="#131313" Opacity="0" IsVisible="False"></Border>
		<Grid IsHitTestVisible="False">
			<ContentControl x:Name="ContentFrame"/>
		</Grid>

		<Grid HorizontalAlignment="Left" Margin="24" IsHitTestVisible="True">
			<Border x:Name="ListBoxBackgroundLayerBorder" CornerRadius="12" Background="#131313" Opacity="0.1" IsVisible="False"></Border>
			
			<ListBox x:Name="QueueListBox" Theme="{StaticResource CustomListBoxTheme}" IsVisible="{Binding IsQueueListBoxVisible, Mode=TwoWay}" GotFocus="ListBox_GotFocus" DoubleTapped="ListBox_DoubleTapped" LostFocus="ListBox_LostFocus" PointerWheelChanged="ListBox_PointerWheelChanged" Loaded="ListBox_Loaded" KeyDown="ListBox_KeyDown" KeyUp="ListBox_KeyUp" Tapped="ListBox_Tapped" CornerRadius="12" ItemsSource="{Binding Queue}" SelectedItem="{Binding SelectedQueueImage, Mode=TwoWay}" SelectionMode="AlwaysSelected,Single" AutoScrollToSelectedItem="True" ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Disabled" Width="132" Background="Transparent">
				<!--  helper:ListBoxStackPanelBehaviors.VisibleItems="{Binding VisibleItemsImageInfo, Mode=OneWayToSource}" -->
				<ListBox.Resources>
					<!-- Edit: VerticalScrollViewerAnimatedBehavior. -->
					<ControlTheme x:Key="CustomListBoxTheme" TargetType="ListBox">
						<Setter Property="Foreground" Value="{DynamicResource SystemControlForegroundBaseHighBrush}" />
						<Setter Property="Background" Value="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" />
						<Setter Property="BorderBrush" Value="{DynamicResource SystemControlForegroundBaseHighBrush}" />
						<Setter Property="BorderThickness" Value="{DynamicResource ListBoxBorderThemeThickness}" />
						<Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
						<Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
						<Setter Property="ScrollViewer.IsScrollChainingEnabled" Value="True" />
						<Setter Property="ScrollViewer.IsScrollInertiaEnabled" Value="True" />
						<Setter Property="Template">
							<ControlTemplate>
								<Border Name="border"
										ClipToBounds="{TemplateBinding ClipToBounds}"
										Background="{TemplateBinding Background}"
										BorderBrush="{TemplateBinding BorderBrush}"
										BorderThickness="{TemplateBinding BorderThickness}"
										CornerRadius="{TemplateBinding CornerRadius}">
									<ScrollViewer Name="PART_ScrollViewer"
												  VerticalSnapPointsType="{TemplateBinding (ScrollViewer.VerticalSnapPointsType)}"
												  HorizontalSnapPointsType="{TemplateBinding (ScrollViewer.HorizontalSnapPointsType)}"
												  HorizontalScrollBarVisibility="{TemplateBinding (ScrollViewer.HorizontalScrollBarVisibility)}"
												  VerticalScrollBarVisibility="{TemplateBinding (ScrollViewer.VerticalScrollBarVisibility)}"
												  IsScrollChainingEnabled="{TemplateBinding (ScrollViewer.IsScrollChainingEnabled)}"
												  IsScrollInertiaEnabled="{TemplateBinding (ScrollViewer.IsScrollInertiaEnabled)}"
																		IsDeferredScrollingEnabled="{TemplateBinding (ScrollViewer.IsDeferredScrollingEnabled)}"
												  AllowAutoHide="{TemplateBinding (ScrollViewer.AllowAutoHide)}"
												  BringIntoViewOnFocusChange="{TemplateBinding (ScrollViewer.BringIntoViewOnFocusChange)}">
										<ItemsPresenter Name="PART_ItemsPresenter"
														ItemsPanel="{TemplateBinding ItemsPanel}"
														Margin="{TemplateBinding Padding}"/>

										<Interaction.Behaviors>
											<ia:VerticalScrollViewerAnimatedBehavior ScrollStepSize="60"/>
										</Interaction.Behaviors>
										
									</ScrollViewer>
								</Border>
							</ControlTemplate>
						</Setter>
					</ControlTheme>

					<!-- Edit: Selection styles etc. -->
					<Thickness x:Key="ListBoxItemPadding">6</Thickness>
					<ControlTheme x:Key="{x:Type ListBoxItem}" TargetType="ListBoxItem">
						<Setter Property="Background" Value="Transparent" />
						<Setter Property="Padding" Value="{DynamicResource ListBoxItemPadding}" />
						<Setter Property="Template">
							<ControlTemplate>
								<ContentPresenter Name="PART_ContentPresenter"
												  Background="{TemplateBinding Background}"
												  BorderBrush="{TemplateBinding BorderBrush}"
												  BorderThickness="{TemplateBinding BorderThickness}"
												  CornerRadius="{TemplateBinding CornerRadius}"
												  ContentTemplate="{TemplateBinding ContentTemplate}"
												  Content="{TemplateBinding Content}"
												  Padding="{TemplateBinding Padding}"
												  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
												  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" />
							</ControlTemplate>
						</Setter>

						<Style Selector="^:disabled /template/ ContentPresenter#PART_ContentPresenter">
							<Setter Property="Foreground" Value="{DynamicResource SystemControlDisabledBaseMediumLowBrush}" />
						</Style>

						<!--  PointerOver State  -->
						<Style Selector="^:pointerover /template/ ContentPresenter#PART_ContentPresenter">
							<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListLowBrush}" />
							<Setter Property="Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
							<Setter Property="Opacity" Value="1" />
						</Style>

						<!--  Pressed State  -->
						<Style Selector="^:pressed /template/ ContentPresenter#PART_ContentPresenter">
							<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListMediumBrush}" />
							<Setter Property="Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
							<Setter Property="Opacity" Value="1" />
						</Style>

						<!--  Selected State  -->
						<Style Selector="^:selected">
							<Style Selector="^ /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentLowBrush}" />
								<Setter Property="CornerRadius" Value="6" />
								<Setter Property="Opacity" Value="1" />
								<Setter Property="Foreground" Value="Transparent" />
							</Style>
							<!--
							<Style Selector="^ /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentLowBrush}" />
								<Setter Property="Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
							</Style>
							-->

							<!--  Selected Unfocused State  
							<Style Selector="^:not(:focus) /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentLowBrush}" />
								<Setter Property="Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
							</Style>
							-->

							<!--  Selected PointerOver State 
							<Style Selector="^:pointerover /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentMediumBrush}" />
								<Setter Property="Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
							</Style>
							-->
							
							<!--  Selected Pressed State  
							<Style Selector="^:pressed /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="Background" Value="{DynamicResource SystemControlHighlightListAccentHighBrush}" />
								<Setter Property="Foreground" Value="{DynamicResource SystemControlHighlightAltBaseHighBrush}" />
							</Style>
							-->
						</Style>
					</ControlTheme>
				</ListBox.Resources>
				<ListBox.KeyBindings>
					<!--  Enter  -->
					<KeyBinding Command="{Binding QueueListviewEnterKeyCommand}" Gesture="Enter" CommandParameter="{Binding SelectedQueueImage}" />
				</ListBox.KeyBindings>
				<ListBox.ItemsPanel>
					<ItemsPanelTemplate>
						<VirtualizingStackPanel/>
					</ItemsPanelTemplate>
				</ListBox.ItemsPanel>
				<ListBox.ItemTemplate>
					<DataTemplate x:DataType="mod:ImageInfo">
						<Grid Width="120" Height="120" Margin="0">
							<Border Margin="0" Width="120" Height="120" HorizontalAlignment="Center" VerticalAlignment="Center" ClipToBounds="True" CornerRadius="6">

								<Grid>
									<TransitioningContentControl Content="{Binding ImageSource, Mode=OneWay}" >
										<TransitioningContentControl.ContentTemplate>
											<DataTemplate DataType="Bitmap">
												<Image Margin="0" Source="{Binding}" Stretch="UniformToFill" VerticalAlignment="Center" Opacity="1"/>
											</DataTemplate>
										</TransitioningContentControl.ContentTemplate>
										<TransitioningContentControl.PageTransition>
											<CrossFade Duration="0:00:00.600" />
											<!-- <PageSlide Duration="0:00:0.100" Orientation="Vertical" /> -->
										</TransitioningContentControl.PageTransition>
									</TransitioningContentControl>
									<!--
									<Button Command="{Binding $parent[ListBox].((vm:MainViewModel)DataContext).AlbumsItemInvokedCommand}" Background="Transparent" BorderThickness="0" CommandParameter="{Binding}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
									</Button> -->
								</Grid>
							</Border>

							<Grid IsVisible="False">
								<TextBlock Text="{Binding ImageFilePath}" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Theme="{DynamicResource BodyTextBlockStyle}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0" Padding="2" Opacity="0.7">
								</TextBlock>
								<!--
								<StackPanel Margin="4">
									<TextBlock Text="{Binding Name}" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Theme="{DynamicResource BodyTextBlockStyle}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0" Padding="2" Opacity="1">
										<Interaction.Behaviors>
											<DataTriggerBehavior Binding="{Binding Name}" ComparisonCondition="Equal" Value="">
												<ChangePropertyAction PropertyName="Text" Value="Unknown Album" />
											</DataTriggerBehavior>
										</Interaction.Behaviors>
									</TextBlock>
									<TextBlock Text="{Binding AlbumArtist}" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Theme="{DynamicResource BodyTextBlockStyle}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0" Padding="2" Opacity="0.7">
										<Interaction.Behaviors>
											<DataTriggerBehavior Binding="{Binding AlbumArtist}" ComparisonCondition="Equal" Value="">
												<ChangePropertyAction PropertyName="Text" Value="Unknown Artist" />
											</DataTriggerBehavior>
										</Interaction.Behaviors>
									</TextBlock>
								</StackPanel>
-->
							</Grid>

						</Grid>
					</DataTemplate>
				</ListBox.ItemTemplate>
				<ListBox.Styles>
					<Style Selector="ListBoxItem" x:DataType="mod:ImageInfo">
						<Setter Property="Height" Value="130"/>
						<Setter Property="Width" Value="130"/>
						<Setter Property="Padding" Value="6,6,6,6"/>
						<Setter Property="Margin" Value="6,6,6,6"/>
						<Setter Property="VerticalAlignment" Value="Center"/>
						<Setter Property="CornerRadius" Value="6"/>
						<Setter Property="Opacity" Value="0.7"/>
					</Style>
					<!-- Style for selected ListBoxItem -->
					<Style Selector="ListBoxItem:selected">
						<Setter Property="Opacity" Value="1.0"/>
					</Style>
				</ListBox.Styles>
			</ListBox>

		</Grid>

		<Grid x:Name="WelcomeMessageGrid" VerticalAlignment="Center" HorizontalAlignment="Center" IsHitTestVisible="True">
			<StackPanel HorizontalAlignment="Center" Spacing="24" Margin="24,36,24,0">
				<TextBlock x:Name="DragDropTextBlock" Text="Drag &amp; Drop" TextWrapping="Wrap" TextTrimming="WordEllipsis" FontWeight="Bold" FontSize="36" HorizontalAlignment="Center"></TextBlock>
				<TextBlock x:Name="YoImageHereTextBlock" Text="Your image files or folder here" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" Opacity="0.7" FontWeight="SemiBold" HorizontalAlignment="Center"></TextBlock>

				<WrapPanel HorizontalAlignment="Center" Margin="0,36,0,0">
					
					<Button HorizontalAlignment="Center" Padding="12" Click="Button_FilePick_Click" PointerPressed="Button1_PointerPressed" Margin="24,0,12,24">
						<Grid HorizontalAlignment="Center">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"></ColumnDefinition>
								<ColumnDefinition Width="*"></ColumnDefinition>
							</Grid.ColumnDefinitions>
							<Viewbox Grid.Column="0" Width="16" Height="16" HorizontalAlignment="Left" VerticalAlignment="Center">
								<PathIcon Background="Transparent" Width="NaN" Height="NaN"
									Data="M10 5C10 5.55228 9.55228 6 9 6C8.44772 6 8 5.55228 8 5C8 4.44772 8.44772 4 9 4C9.55228 4 10 4.44772 10 5ZM4.5 2C3.11929 2 2 3.11929 2 4.5V9.5C2 10.8807 3.11929 12 4.5 12H9.5C10.8807 12 12 10.8807 12 9.5V4.5C12 3.11929 10.8807 2 9.5 2H4.5ZM3 4.5C3 3.67157 3.67157 3 4.5 3H9.5C10.3284 3 11 3.67157 11 4.5V9.5C11 9.73157 10.9475 9.95088 10.8538 10.1467L8.20919 7.50207C7.54139 6.83427 6.45868 6.83427 5.79089 7.50207L3.1462 10.1467C3.05248 9.95092 3 9.73159 3 9.5V4.5ZM3.85333 10.8538L6.49799 8.20917C6.77526 7.9319 7.22481 7.9319 7.50208 8.20918L10.1467 10.8538C9.9509 10.9475 9.73158 11 9.5 11H4.5C4.26844 11 4.04914 10.9475 3.85333 10.8538ZM6.99994 14C6.18203 14 5.45586 13.6072 4.99976 13H9.49994C11.4329 13 12.9999 11.433 12.9999 9.5V3.99982C13.6072 4.45592 13.9999 5.18209 13.9999 6V9.5C13.9999 11.9853 11.9852 14 9.49994 14H6.99994Z">
								</PathIcon>
							</Viewbox>
							<TextBlock Grid.Column="1" Text="SELECT FILES" TextWrapping="NoWrap" TextTrimming="WordEllipsis" Opacity="1" FontWeight="SemiBold" Margin="12,0,0,0" VerticalAlignment="Center"></TextBlock>
						</Grid>
					</Button>

					<Button HorizontalAlignment="Center" Padding="12" Click="Button_FolderPick_Click" PointerPressed="Button2_PointerPressed" Margin="24,0,12,24">
						<Grid HorizontalAlignment="Center">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"></ColumnDefinition>
								<ColumnDefinition Width="*"></ColumnDefinition>
							</Grid.ColumnDefinitions>
							<Viewbox Grid.Column="0" Width="16" Height="16" HorizontalAlignment="Left" VerticalAlignment="Center">
								<PathIcon Background="Transparent" Width="NaN" Height="NaN"
									Data="M4 5C4 4.44772 4.44772 4 5 4H6.5C7.05228 4 7.5 4.44772 7.5 5V6.5C7.5 7.05228 7.05228 7.5 6.5 7.5H5C4.44772 7.5 4 7.05228 4 6.5V5ZM6.5 5H5V6.5H6.5V5ZM5 8.5C4.44772 8.5 4 8.94772 4 9.5V11C4 11.5523 4.44772 12 5 12H6.5C7.05228 12 7.5 11.5523 7.5 11V9.5C7.5 8.94772 7.05228 8.5 6.5 8.5H5ZM5 9.5H6.5V11H5V9.5ZM8.5 5C8.5 4.44772 8.94772 4 9.5 4H11C11.5523 4 12 4.44772 12 5V6.5C12 7.05228 11.5523 7.5 11 7.5H9.5C8.94772 7.5 8.5 7.05228 8.5 6.5V5ZM11 5H9.5V6.5H11V5ZM9.5 8.5C8.94772 8.5 8.5 8.94772 8.5 9.5V11C8.5 11.5523 8.94772 12 9.5 12H11C11.5523 12 12 11.5523 12 11V9.5C12 8.94772 11.5523 8.5 11 8.5H9.5ZM9.5 9.5H11V11H9.5V9.5ZM2 4.5C2 3.11929 3.11929 2 4.5 2H11.5C12.8807 2 14 3.11929 14 4.5V11.5C14 12.8807 12.8807 14 11.5 14H4.5C3.11929 14 2 12.8807 2 11.5V4.5ZM4.5 3C3.67157 3 3 3.67157 3 4.5V11.5C3 12.3284 3.67157 13 4.5 13H11.5C12.3284 13 13 12.3284 13 11.5V4.5C13 3.67157 12.3284 3 11.5 3H4.5Z">
								</PathIcon>
							</Viewbox>
							<TextBlock Grid.Column="1" Text="SELECT FOLDERS" TextWrapping="NoWrap" TextTrimming="WordEllipsis" Opacity="1" FontWeight="SemiBold" Margin="12,0,0,0" VerticalAlignment="Center"></TextBlock>
						</Grid>
					</Button>
					
				</WrapPanel>

				
				
			</StackPanel>
		</Grid>
		
	</Grid>
</Window>
